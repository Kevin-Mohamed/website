+function(a,b,c){var d=a.location,e=jQuery.noConflict(),f=function(){function n(){var a=e("#header").data("page"),b=e("#all-search-results"),d=e("#top-system-message").children(".system-message-close"),f=1===a.history?1:c;if(f&&e.post("/rest/history",{ref:a.ref,name:a.name,id:a.id,"class":a["class"],type:a.type,is_obj:a.is_obj}),e(".user-history").size()>0&&o(f),C(a["class"]),d.size()>0&&(v("show"),d.click(function(){v("hide",d.data("id"))})),U.init(a),V.init(a),e(".star-status-"+a.wbid).size()>0&&e(".star-status-"+a.wbid).load("/rest/workbench/star?wbid="+a.wbid+"&name="+a.name+"&class="+a["class"]+"&type="+a.type+"&id="+a.id+"&url="+a.ref+"&save_to="+a.save+"&is_obj="+a.is_obj),R(a.ref),a.notify&&u(a.notify),p(),q(),b.size()>0){var g=b.data("search");J(g.type,g.species,g.query)}else r();s()}function o(a){var b=e("#user_history-content");x(e(".user-history"),"/rest/history?sidebar=1"),b.size()>0&&b.text().length>4&&x(b,"/rest/history"),a&&setTimeout(o,6e5),N("activity")}function p(){A(),e("#nav-bar").find("ul li").hover(function(){var a=e(this);e("div.columns>ul").hide(),f&&(a.siblings("li").children("ul.wb-dropdown").hide(),a.siblings("li").children("a").removeClass("hover"),a.children("ul.wb-dropdown").find("a").removeClass("hover"),a.children("ul.wb-dropdown").find("ul.wb-dropdown").hide(),clearTimeout(f),f=c),a.children("ul.wb-dropdown").show(),a.children("a").addClass("hover")},function(){var a=e(this);f&&(clearTimeout(f),f=c),f=setTimeout(function(){a.children("ul.wb-dropdown").hide(),a.children("a").removeClass("hover")},300)}),x(e(".status-bar"),"/rest/auth",c,function(){e("#bench-status").load("/rest/workbench");var b=e("#login");b.size()>0?b.click(function(){e(this).toggleClass("open ui-corner-top").siblings().toggle()}):e("#logout").click(function(){a.open("/logout","pop","status=no,resizable=yes,height=2px,width=2px").blur()})})}function q(){var a=e("#person-search"),b=e("#column-dropdown");y(),e("#print").click(function(){var a=d.hash.replace("#",""),b=e(this);e.ajax({type:"POST",url:"/rest/print",data:{layout:a},beforeSend:function(){w(b)},success:function(a){b.html(""),d.href=a},error:function(a,b,c){alert(a+" "+b+" "+c)}})}),e(".section-button").click(function(){var a=e(this).attr("wname");e("#nav-"+a).trigger("open"),Q.goToAnchor(a)}),e(".sortable").size()>0&&e(".sortable").sortable({handle:".widget-header, #widget-footer",items:"li.widget",placeholder:"placeholder",connectWith:".sortable",opacity:.6,forcePlaceholderSize:!0,update:function(){P.updateLayout()}}),b.hover(function(){f&&(e("#nav-bar").find("ul li .hover").removeClass("hover"),e("#nav-bar").find("ul.wb-dropdown").hide(),clearTimeout(f),f=c),b.children("ul").show()},function(){f&&(clearTimeout(f),f=c),0===b.find("#layout-input:focus").size()?f=setTimeout(function(){b.children("ul").hide()},300):b.find("#layout-input").blur(function(){f=setTimeout(function(){b.children("ul").hide()},600)})}),e("#nav-min").click(function(){var a=e(".navigation-min").add("#navigation"),b=e("#page-title"),c=a.width(),d="open sidebar",f="-1em";0===c?(c="12em",d="close sidebar",f=175):c=0,a.stop(!1,!0).animate({width:c}).show().children("#title").toggleClass("closed").children("div").toggle(),b.stop(!1,!0).animate({marginLeft:f}).show(),e(this).attr("title",d).children("#nav-min-icon").toggleClass("ui-icon-triangle-1-w ui-icon-triangle-1-e"),P.updateLayout(),k.toggleClass("sidebar-hidden")}),e("#hide-empty-fields").click(function(){k.toggleClass("show-empty")}),a.size()>0&&x(a,a.attr("href"),c,function(){a.delegate(".results-person .result li a","click",function(){e(".ui-state-highlight").removeClass("ui-state-highlight");var a=e(this).attr("href").split("/").pop();return e.ajax({type:"GET",url:"/auth/info/"+a,dataType:"json",success:function(a){var b=e("#link-account");if(0===b.size()){e("input#name").attr("value",a.fullname).attr("disabled","disabled");var d=new String(a.email);if(a.email&&a.status_ok){var f=RegExp(e("input#email").attr("value"),"gi");(d.match(f)||!e("input#email").attr("value"))&&e("#email").attr("disabled","disabled").parent().hide(),e("input#wbemail").attr("value",d).parent().show()}else e("input#wbemail").attr("value","").parent().hide(),e("#email").removeAttr("disabled").parent().show();e(".register-notice").html("<span id='fade'>"+a.message+"</span>").show(),e("input#wbid").attr("value",a.wbid)}else{e("input#wbid").attr("value",a.wbid),e("input#email").attr("value",a.email),b.removeAttr("disabled"),e("input#confirm").attr("value","");var g=["[% emails.join('","') %]"];if(a.email&&a.status_ok)for(var h=""+a.email,i=0;g.length>i;i++){var f=RegExp(g[i],"gi");if(h.match(f))return e(".register-notice").css("visibility","hidden"),e("input#confirm").attr("value",1),c}else b.attr("disabled",1);e(".register-notice").html("<span id='fade'>"+a.message+"</span>").css("visibility","visible")}},error:function(a,b,c){alert(a+" "+b+" "+c)}}),e(this).parent().parent().addClass("ui-state-highlight"),!1})})}function r(){function j(a){for(var b=0,c=-1,d=a.length;d>c++;)b+=a.eq(c).height();return b}var i,f=e("#widget-holder"),g=e("#widgets");return e(".list-layouts"),0===f.size()?(e("#content").addClass("bare-page"),c):(Q.sidebarInit(),a.onhashchange=P.readHash,a.onresize=P.resize,P.Breadcrumbs.init(),d.hash.length>0?P.readHash():(i=f.data("layout"))?P.resetPageLayout(i):P.openAllWidgets(),g.find(".module-load").click(function(){var a=e(this).attr("wname"),b=e("#nav-"+a),c=e("#"+a+"-content");if(!b.hasClass("ui-selected"))if(4>c.text().length){var d=".left",g=P.getLeftWidth(f);if(g>=90)f.children(".right").children(".visible").height()&&(d=".right");else{var h=j(f.children(".left").children(".visible"));rightHeight=j(f.children(".right").children(".visible")),h>rightHeight&&(d=".right")}L(a,b,c,d)}else c.parents("li").addClass("visible"),b.addClass("ui-selected"),t(c.prev().find(".module-min"),!1,"maximize");return Q.goToAnchor(a),P.updateLayout(),Q.sidebarMove(),!1}),g.find(".module-close").click(function(){var a=e(this).attr("wname"),b=e("#nav-"+a),c=e("#"+a+"-content");return Q.scrollUp(c.parents("li")),t(c.prev().find(".module-min"),!1,"minimize",function(){b.removeClass("ui-selected"),c.parents("li").removeClass("visible"),P.updateLayout()}),Q.sidebarMove(),!1}),f.children("#widget-header").disableSelection(),f.find(".module-max").click(function(){var c=e(this).parents(".widget-container"),d=c.clone(),f=a.open("","test","height="+c.height()+",width="+c.width());f.document.write(b.head.innerHTML),f.document.write(d.html())}),g.find(".module-load, .module-close").bind("open",function(){var a=e(this).attr("wname"),b=e("#nav-"+a),c=e("#"+a+"-content");return L(a,b,c,".left"),!1}),f.find(".module-min").click(function(){t(e(this),!0)}),f.find(".reload").click(function(){N(e(this).attr("wname"))}),e(".feed").click(function(){var a=e(this).attr("rel"),b=e(this).parent().next("#widget-feed");b.filter(":hidden").empty().load(a),b.slideToggle("fast")}),c)}function s(){var a=e("#content");e("body").delegate(".toggle","click",function(){var a=e(this);return a.toggleClass("active").next().slideToggle("fast",function(){e.colorbox&&e.colorbox.resize(),Q.sidebarMove()}),a.hasClass("load-toggle")&&(x(a.next(),a.attr("href")),a.removeClass("load-toggle")),a.children(".ui-icon").toggleClass("ui-icon-triangle-1-e ui-icon-triangle-1-s"),!1}),a.delegate(".evidence","click",function(){var a=e(this);a.children(".ev-more").toggleClass("open").children(".ui-icon").toggleClass("ui-icon-triangle-1-s ui-icon-triangle-1-n"),a.children(".ev").toggle("fast")}),a.delegate(".slink","mouseover",function(){var a=e(this);cb.getPlugin("colorbox",function(){a.colorbox({data:a.attr("href"),width:"800px",height:"550px",scrolling:!1,onComplete:function(){e.colorbox.resize()},title:function(){return a.next().text()+" "+a.data("class")}})})}),a.delegate(".bench-update","click",function(){var a=e(this),b=a.attr("wbid"),c=a.attr("save_to"),d=a.attr("ref")+"?name="+escape(a.attr("name"))+"&url="+escape(a.attr("href"))+"&save_to="+c+"&is_obj="+a.attr("is_obj");return e(".star-status-"+b).find("#save").toggleClass("ui-icon-star-yellow ui-icon-star-gray"),e("#bench-status").load(d,function(){e("div#"+c+"-content").text().length>3&&N(c,1)}),!1}),e("body").delegate(".generate-file-download","click",function(){var b=e(this).find("#filename").text(),c=e(this).find("#content").text();cb.getPlugin("generateFile",function(){e.generateFile({filename:b,content:c,script:"/rest/download"})})})}function t(a,b,d,f){var g=e("#"+a.attr("wname")+"-content");return d&&a.attr("title")!==d?(f&&f(),c):(g.slideToggle("fast",function(){Q.sidebarMove(),f&&f()}),a.toggleClass("ui-icon-triangle-1-s ui-icon-triangle-1-e").closest(".widget-container").toggleClass("minimized"),b&&a.toggleClass("ui-icon-circle-triangle-e ui-icon-circle-triangle-s"),a.hasClass("show")?a.attr("title","minimize").removeClass("show"):a.attr("title","maximize").addClass("show"),P.updateLayout(),c)}function u(a){g&&(clearTimeout(g),g=c);var b=e("#notifications");b.show().children("#notification-text").text(a),g=setTimeout(function(){b.fadeOut(400)},3e3),b.click(function(){g&&(clearTimeout(g),g=c),e(this).hide()})}function v(a,b){var d=e(".system-message"),f=e("#notifications");"show"===a?(f.css("top","20px"),Q.set_system_message(20)):(d.animate({height:"0px"},"slow",c,function(){e(this).hide()}),e.post("/rest/system_message/"+b),Q.set_system_message(0),f.css("top","0"))}function w(a){a.html('<div class="loading"><img src="/img/ajax-loader.gif" alt="Loading..." /></div>')}function x(a,b,c,f){e.ajax({url:b,beforeSend:function(){c||w(a)},success:function(b){a.html(b)},error:function(b){var g=e(b.responseText).find(".error-message-technical").html()||"";a.html('<div class="ui-state-error ui-corner-all"><p><strong>Sorry!</strong> An error has occured.</p><p><a href="/tools/support?url='+d.pathname+(g?"&msg="+encodeURIComponent(g.trim()):"")+'">Let us know</a></p><p>'+g+"</p></div>")},complete:function(){f&&f()}})}function y(){var a,b=!1;e("#operator-box").click(function(){var a=e(this);b||(x(e("#operator-box"),"/rest/livechat",0),b=!0),a.hasClass("minimize")?a.animate({width:"9em"}).children().show():a.animate({width:"1.5em"}).children().hide(),a.toggleClass("minimize")}),e(".operator").click(function(){if(e(this).attr("rel"))e.post("/rest/livechat?open=1",function(){d.href="/tools/operator"});else{var c=e("#operator-box");x(c,"/rest/livechat",0),b=!0,c.hasClass("minimize")&&c.removeClass("minimize").animate({width:"9em"}).children().show(),a=setTimeout(function(){c.addClass("minimize").animate({width:"1.5em"}).children().hide()},4e3)}}),e("#issue-box").click(function(){var a=e(this);a.toggleClass("minimize").children().toggle(),a.animate({width:a.hasClass("minimize")?"1em":"14em"})})}function z(a){var b=e(a);""!==b.attr("value")&&b.siblings(".holder").fadeOut(),b.focus(function(){e(this).siblings(".holder").fadeOut()}),b.blur(function(){""===e(this).attr("value")&&e(this).siblings(".holder").fadeIn()})}function A(){var f,a=e("#Search"),b="search...";e("#searchForm"),a.focus(function(){e(this).addClass("active")}),a.blur(function(){e(this).removeClass("active")}),a.focus(function(){e(this).attr("value")===b&&e(this).attr("value","")}),a.blur(function(){""===e(this).attr("value")&&e(this).attr("value",b)}),a.autocomplete({source:function(a,b){f=e.getJSON("/search/autocomplete/"+h,a,function(a,c,d){d===f&&b(a)})},minLength:3,select:function(a,b){d.href=b.item.url}})}function B(a){a?h=h||"all":a="Search";var b=e("#"+a).attr("value");"search..."!==b&&b||(b=""),b=encodeURIComponent(b.trim()),b=b.replace("%26","&"),b=b.replace("%2F","/"),d.href="/search/"+h+"/"+b+(j?"?species="+j:"")}function C(a){if(a||(a="gene"),h=a,"all"===a)a="for anything";else{var b="for a";a.match(/^[aeiou]/)&&(b+="n"),a=b+" "+a.replace(/[_]/," ")}e(".current-search").text(a)}function D(a){j=a,"all"===a?a="all species":(a=a.charAt(0).toUpperCase()+a.slice(1),a=a.replace(/[_]/,". ")),e(".current-species-search").text(a)}function E(a){var b=a.find("#results"),d=b.size()>0?b.data("search"):c;return d?(G(d.query,d.type,d.species,d.widget,d.nostar,d.count,a),c):(F(b),c)}function F(a){for(var d,b=a.find(".text-min"),c=-1,f=b.size();(d=b.eq(++c))&&f>c;)d.height()>35&&d.html('<div class="text-min-expand">'+d.html()+'</div><div class="more"><div class="ui-icon ui-icon-triangle-1-s"></div></div>').click(function(){var a=e(this),b=a.children(".text-min-expand");b.animate({height:40>b.height()?"100%":"2.4em"}).css("max-height","none").next().toggleClass("open").children().toggleClass("ui-icon-triangle-1-s ui-icon-triangle-1-n"),a.parent().find(".expand").toggleClass("ellipsis")})}function G(a,b,c,d,f,g,h){function o(){h.find("#results").find(".load-star").each(function(){e(this).load(e(this).attr("href"))})}function p(a){F(a),0!==n.length&&cb.getPlugin("highlight",function(){for(var b=0;n.length>b;b++)n[b]&&a.highlight(n[b])})}var i=decodeURI(a),j=1,k=g,l=h.find((d?"."+d+"-widget ":"")+".load-results"),n=i?i.replace(/[,\.\*]/," ").split(" "):[];p(h.find("div#results")),o(),k>10&&(h.find(".lazyload-widget").size()>0&&Q.search(),l.click(function(){var a=e(this).attr("href")+(j+1)+"?"+(c?"species="+c:"")+(d?"&widget="+d:"")+(f?"&nostar="+f:"");div=e("<div></div>"),res=e((d?"."+d+"-widget":"")+" #load-results"),e(this).removeClass("load-results"),j++,w(div),res.html("loading..."),div.load(a,function(a,b,c){k=div.find("#page-count").data("count")||k;var d=k-10*j;if(d>0?(d>10&&(d=10),res.addClass("load-results"),res.html("load "+d+" more results")):res.remove(),p(div),"error"===b){var f="Sorry but there was an error: ";e(this).html(f+c.status+" "+c.statusText)}Q.sidebarMove(),div.find(".load-star").each(function(){e(this).load(e(this).attr("href"))})}),div.appendTo(e(this).parent().children("ul")),m++,Q.sidebarMove()}))}function H(a){var b=e("#all-search-results");return b.empty(),x(b,a,c,function(){E(b)}),m=0,b.hasClass("references")||I(),!1}function I(){try{e(a).scrollTop(0)}catch(b){}return Q.resetSidebar(),c}function J(a,b,d,f){var g="/search/"+a+"/"+d+"/?inline=1"+(b&&"&species="+b),h=e("#all-search-results"),i=e("#search-count-summary"),j=e("#curr-ref-text");f||(Q.sidebarInit(),C(a),x(h,g,c,function(){E(h)})),i.find(".count").each(function(){e(this).load(e(this).attr("href"),function(){"0"===e(this).text()?e(this).parent().remove():e(this).parent().show().parent().prev(".title").show()})}),i.find(".ui-icon-close").click(function(){return H(g),i.find(".ui-selected").removeClass("ui-selected"),!1}),i.find(".load-results").click(function(){var a=e(this);return H(a.attr("href")),i.find(".ui-selected:not('#current-ref')").removeClass("ui-selected"),a.addClass("ui-selected"),j.html(a.html()),!1}),"paper"===a&&P.resize()}function K(a,b,c){try{var d=_gat._createTracker("UA-16257183-1");d._trackEvent(b,c)}catch(e){}}function L(a,b,d,f){var g=b.attr("href");return d.closest("li").appendTo(e("#widget-holder").children(f)),4>d.text().length&&(O(d.parent(".widget-container")),x(d,g,c,function(){Q.sidebarMove(),E(d),P.resize()})),t(d.prev().find(".module-min"),!1,"maximize"),b.addClass("ui-selected"),d.parents("li").addClass("visible"),!1}function M(a){t(e("#"+a).find(".module-min"),!1,"minimize")}function N(a,b,c){var d=e("#"+a+"-content");d.text().length>4&&x(d,c||e("#nav-"+a).attr("href"),b,function(){E(d)})}function O(a){a.find("div.module-min").hover(function(){var a=e(this);a.addClass(a.hasClass("show")?"ui-icon-circle-triangle-e":"ui-icon-circle-triangle-s")},function(){var a=e(this);a.removeClass("ui-icon-circle-triangle-s ui-icon-circle-triangle-e").addClass(a.hasClass("show")?"ui-icon-triangle-1-e":"ui-icon-triangle-1-s")}),a.find("div.module-close").hover(function(){e(this).toggleClass("ui-icon-circle-close ui-icon-close")})}function R(a){var b=e(".comment-count");b.size()>0&&b.load("/rest/feed/comment?count=1;url="+a)}function S(a,b,d,e,f){return""!==a.val()||f&&""!==f.val()?a.val()&&T(a.val(),"Not a valid email address!")===!1?(a.focus().addClass("ui-state-error"),!1):d?""===d.val()?(d.focus().addClass("ui-state-error"),!1):e&&d.val()!==e.val()?(alert("The passwords do not match. Please enter again"),d.focus().addClass("ui-state-error"),!1):c:b&&""===b.val()?(b.focus().addClass("ui-state-error"),!1):!0:(a.focus().addClass("ui-state-error"),!1)}function T(a,b){var c=a.indexOf("@"),d=a.lastIndexOf(".");return 1>c||2>d-c?(alert(b),!1):!0}function X(a,b,d){"get"===a?cb.getPlugin("colorbox",function(){e(".history-logging").colorbox(),d&&d()}):(e.post("/rest/history",{history_on:b},function(){d&&d()}),o(1===b?1:c),e.colorbox&&e.colorbox.close())}function Y(a,b){var c=e("#"+a);w(c),cb.getPlugin("jGFeed",function(){e.jGFeed(b,function(a){if(!a)return!1;for(var e,b='<div id="results"><ul>',d=-1;e=a.entries[++d];)b+='<div class="result"><li><div class="date" id="fade">'+e.publishedDate.substring(0,16)+"</div>"+'<a href="'+e.link+'">'+e.title+"</a></li>"+'<div class="text-min">'+e.content.replace(/(\<\/?p\>|\<br\>)/g,"")+"</div></div>";b+="</ul></div>",c.html(b),F(c)},3)})}function ab(b,d){for(var s,f=["#0A6314","#08298A","#B40431","#FF8000","#00E300","#05C1F0","#8000FF","#69088A","#B58904","#E02D8A","#FFFC2E"],g={attrName:"type",entries:[]},h={attrName:"direction",entries:[{attrValue:"Effector->Effected",value:"T"}]},i={attrName:"direction",entries:[{attrValue:"Effector->Effected",value:"ARROW"}]},j={attrName:"ntype",entries:[{attrValue:"Rearrangement",value:"HEXAGON"},{attrValue:"Gene",value:"OCTAGON"},{attrValue:"Molecule",value:"TRIANGLE"},{attrValue:"Other",value:"ELLIPSE"}]},k={attrName:"type",entries:[{attrValue:"Predicted",value:"DOT"}]},l={attrName:"width",minValue:3,maxValue:15,maxAttrValue:15},m={attrName:"number",minValue:"#04043D",maxValue:"#6FA2D9"},n={attrName:"phenotype",entries:[{attrValue:"",value:"<b>${type}<br />${direction}<br />${source} --- ${target}<br />${width} citation(s)</b>"}]},o={dataSchema:{nodes:[{name:"label",type:"string"},{name:"number",type:"int"},{name:"color",type:"string"},{name:"ntype",type:"string"},{name:"link",type:"string"},{name:"predicted",type:"int"}],edges:[{name:"label",type:"string"},{name:"type",type:"string"},{name:"direction",type:"string"},{name:"width",type:"int"},{name:"phenotype",type:"string"},{name:"nearby",type:"int"}]},data:b},p={global:{backgroundColor:"#ffffff",tooltipDelay:0},nodes:{opacity:.7,borderWidth:0,hoverGlowOpacity:.8,size:30,tooltipText:"<b>${label} (${ntype})</b>",tooltipBackgroundColor:"#fafafa",shape:{defaultValue:"OCTAGON",discreteMapper:j},color:{continuousMapper:m},hoverGlowColor:"#aae6ff",labelGlowOpacity:1,labelHorizontalAnchor:"center"},edges:{width:{defaultValue:.5,continuousMapper:l},color:{defaultValue:"#999999",discreteMapper:g},opacity:.4,hoverOpacity:1,style:{defaultVAlue:"SOLID",discreteMapper:k},sourceArrowShape:{defaultValue:"NONE",discreteMapper:h},targetArrowShape:{defaultValue:"NONE",discreteMapper:i},labelHorizontalAnchor:"center",label:{passthroughMapper:{attrName:"type"}},tooltipText:{defaultValue:"<b>${type}<br />${direction}<br />${source} --- ${target}<br />${phenotype}<br />${width} citation(s)</b>",discreteMapper:n},tooltipBackgroundColor:"#fafafa"}},q={swfPath:"/js/jquery/plugins/cytoscapeweb/swf/CytoscapeWeb",flashInstallerPath:"/swf/playerProductInstall"},r=-1;s=d[++r];)p.edges.color.discreteMapper.entries[r]={attrValue:s,value:"Predicted"==s?"#999":f[r]};cb.getPlugin("cytoscape_web",function(){function g(){d.find("input:checkbox").map(function(){var a=e(this);"type"==a.attr("name")?a.prop("checked",!a.val().match("Predicted")):a.prop("checked",!0)})}function h(){var a=i("nodes"),c=d.find("input.cyto_predict").is(":checked");b.filter("nodes",function(b){return a||!f?b.data.ntype.match(a)&&(c?!0:1!=b.data.predicted):!1})}function i(a){return d.find("input[name="+a+"]:checked").map(function(){return this.getAttribute("value")}).get().join("|")}function j(){var a=i("type"),c=i("direction"),e=d.find("input[name=nearby]").is(":checked");b.filter("edges",function(b){return a&&c?b.data.type.match(a)&&b.data.direction.match(c)&&(e||0==b.data.nearby):!1},!0)}var b=new org.cytoscapeweb.Visualization("cytoscapeweb",q),d=e("#cyto_legend"),f=d.find("input[name=nodes]").size()>0;b.draw({network:o,visualStyle:p,nodeTooltipsEnabled:!0,edgeTooltipsEnabled:!0}),b.ready(function(){b.filter("nodes",function(a){return 1!=a.data.predicted}),b.addListener("click","nodes",function(b){a.open(b.target.data.link)}),g(),j()}),d.find("input:checkbox").click(function(){return e(this).val().match("Predicted")?(j(),h(),c):(e(this).attr("name").match("nodes")?h():j(),c)}),e(".cyto_panel").change(function(){var a=e("#cyto_panel_direction option:selected").val(),c=e("#cyto_panel_type option:selected").val(),d=e("#cyto_panel_nearby option:selected").val(),f=e("#cyto_panel_nodetype option:selected").val();0===f?b.removeFilter("nodes",!0):b.filter("nodes",function(a){return a.data.ntype===f}),0===a&&0===c&&0===d?b.filter("edges",function(a){return"No_interaction"!==a.data.type},!0):b.filter("edges",function(b){return 0!==a&&0!==c&&0!==d?b.data.type===c&&b.data.direction==a&&0==b.data.nearby:0!==a&&0!==d?b.data.direction==a&&0==b.data.nearby&&"No_interaction"!==b.data.type:0!==a&&0!==c?b.data.type===c:0!==a?b.data.direction===a&&"No_interaction"!==b.data.type:0!==c&&0!==d?b.data.type===c&&0===b.data.nearby:0!==d?0===b.data.nearby&&"No_interaction"!==b.data.type:b.data.type===c},!0)})}),e("#resizable").resizable()}function bb(a){cb.getPlugin("markitup",function(){cb.getPlugin("markitup-wiki",a)})}var f,g,h="all",j="",k=e("#wrap"),l=0,m=0,P=function(){function o(){g!==(g=n>b.documentElement.clientWidth)&&(g?p(100,100):v(),(multCol=e("#column-dropdown").find(".multCol"))&&multCol.toggleClass("ui-state-disabled")),k.hasClass("table-columns")&&m.size()>0&&j.children(".left").width()+j.children(".right").width()>m.outerWidth()&&p(100,100,1),h&&h.hasClass("widget-narrow")!==845>h.innerWidth()&&h.toggleClass("widget-narrow")}function p(a,b,c){var d=j.children(".sortable"),a=(j.innerWidth(),g?100:a);a>95?(b=a=100,k.removeClass("table-columns").addClass("one-column")):k.addClass("table-columns").removeClass("one-column"),d.filter(".left").css("width",a+"%"),d.filter(".right").css("width",b+"%"),c||z()}function q(a){var b=j.attr("wclass");e.get("/rest/layout/"+b+"/"+a+"?delete=1"),e("div.columns ul div li#layout-"+a).remove()}function r(a){var b=j.attr("wclass");e.get("/rest/layout/"+b+"/"+a,function(a){var b=a.childNodes[0].childNodes,c=b.length;for(i=0;c>i;i++){var e=b.item(i);"data"===e.nodeName&&(d.hash=e.attributes.getNamedItem("lstring").nodeValue)}},"xml")}function s(a){a=a||j.data("layout"),a.hash?d.hash=a.hash:(C(a.leftlist,a.rightlist||[],a.leftwidth||100),l++,z())}function t(a){return z(a,c,function(){e(".list-layouts").load("/rest/layout_list/"+e(".list-layouts").data("class")+"?section="+e(".list-layouts").data("section"),function(a,b,c){if("error"===b){var d="Sorry but there was an error: ";e(".list-layouts").html(d+c.status+" "+c.statusText)}})}),f&&(clearTimeout(f),f=c),f=setTimeout(function(){e("#column-dropdown").children("ul").hide()},700),!1}function u(a,b,c,f,g){var h=e.map(a,function(a){return w(a)}),i=e.map(b,function(a){return w(a)}),j=e.map(f,function(a){return w(a)}),k=h.join("")+"-"+i.join("")+"-"+c/10+(j.length>0?"-"+j.join(""):"")+(g?"-":"");return d.hash&&decodeURI(d.hash).match(/^[#](.*)$/)[1]!==k&&l++,d.hash=k,k}function v(){if(0===l){var b,a=d.hash,f=(b=decodeURI(a).match(/^[#](.*)$/))?b[1].split("-"):c;if(!f)return;var g=f[0],h=f[1],i=10*f[2],j=f[3],k="-"===a.charAt(a.length-1);g&&(g=e.map(g.split(""),function(a){return y(a)})),h&&(h=e.map(h.split(""),function(a){return y(a)})),j&&(j=e.map(j.split(""),function(a){return y(a)})),C(g,h,i,a,j,k)}else l--}function w(a){return widgetList.list.indexOf(a).toString(36)}function x(){var b="",c=e("#navigation").find("li.module-load:not(.tools,.me,.toggle)").size();if(0!==widgetList.list.length){for(i=0;c>i;i++)b+=i.toString(36);return a.location.hash=b+"--10",!1}}function y(a){return widgetList.list[parseInt(a,36)]}function z(a,b,c){var d=j.attr("wclass"),f=b||A(j),g="string"==typeof a?escape(a):"default";e.post("/rest/layout/"+d+"/"+g,{lstring:f},function(){P.resize(),c&&c()})}function A(a){var b=a.children(".left").children(".visible").map(function(){return this.id}).get(),c=a.children(".right").children(".visible").map(function(){return this.id}).get(),d=B(a),f=a.find(".visible .widget-container.minimized").parent().map(function(){return this.id}).get(),g=e("#navigation").find(".closed").size()>0?!0:!1;return u(b,c,d,f,g)}function B(a){var b=g?10*decodeURI(d.hash).match(/^[#](.*)$/)[1].split("-")[2]:100*(parseFloat(a.children(".left").outerWidth())/parseFloat(a.outerWidth()));return 10*Math.round(b/10)}function C(a,b,f,g,h,i){e("#navigation").find(".ui-selected").removeClass("ui-selected"),e("#widget-holder").children().children("li").removeClass("visible"),p(f,100-f,1);for(var j=0,k=a?a.length:0;k>j;j++){var l=e.trim(a[j]);if(l.length>0){var m=e("#nav-"+l),n=e("#"+l+"-content");L(l,m,n,".left")}}for(var j=0,k=b?b.length:0;k>j;j++){var l=e.trim(b[j]);if(l.length>0){var m=e("#nav-"+l),n=e("#"+l+"-content");L(l,m,n,".right")}}for(var j=0,k=h?h.length:0;k>j;j++){var l=e.trim(h[j]);l.length>0&&M(l)}i&&e("#nav-min").click(),d.hash.length>0&&z(c,g)}var g=!1,h=e("#references-content"),j=e("#widget-holder"),m=e("#page-title").find("h2"),n="/"===d.pathname||"/me"===d.pathname?900:1300;widgetList=this.wl||function(){var b=e("#navigation"),c=b.find(".module-load").map(function(){return this.getAttribute("wname")}).get();return this.wl={list:c},this.wl}();var D=function(){function g(){if(a&&!(3>(f=a.children().size()))){var l,g=a.children(),j=g.slice(0,f-2),k=g.slice(f-2);a.empty(),c=e('<span id="breadcrumbs-hide"></span>'),c.append(j).children().after(" &raquo; "),a.append('<span id="breadcrumbs-expand" class="ui-icon-large ui-icon-triangle-1-e tl" tip="exapand"></span>').append(c).append(k),a.children(":last").addClass("page-title").before(" &raquo; "),l=e("#breadcrumbs-expand"),l.click(function(){(b=!b)?h(e(this)):i(e(this))}),d=c.width(),i(l)}}function h(a){c.animate({width:d},function(){c.css("width","auto")}).css("visibility","visible"),a.attr("tip","minimize").removeClass("ui-icon-triangle-1-e").addClass("ui-icon-triangle-1-w")}function i(a){c.animate({width:0},function(){c.css("visibility","hidden")}),a.attr("tip","expand").removeClass("ui-icon-triangle-1-w").addClass("ui-icon-triangle-1-e")}var c,d,f,a=e("#breadcrumbs"),b=!1;return{init:g}}();return{resize:o,deleteLayout:q,columns:p,openAllWidgets:x,resetLayout:C,setLayout:r,resetPageLayout:s,readHash:v,getLeftWidth:B,updateLayout:z,Breadcrumbs:D,newLayout:t}}(),Q=function(){function q(){g=0,i.stop(!1,!0).css("position","relative").css("top",0)}function r(a){var d=b.getElementById(a),g=t(d)?c:e(d).offset().top-f-10;g&&(l.stop(!1,!0).animate({scrollTop:g},2e3,function(){Q.sidebarMove(),n=0}),n=g>l.scrollTop()?1:0)}function s(a){var b=e(a).offset().top+e(a).height(),c=d.scrollTop()+d.height();c>=b&&l.stop(!1,!0).animate({scrollTop:d.scrollTop()-a.height()-10},"fast",function(){Q.sidebarMove()})}function t(a){var b=d.scrollTop(),c=b+.75*d.height(),f=e(a).offset().top;return f>=b&&c>=f}function u(){if(i&&i.offset()){var a=i.outerHeight()<d.height()-f||i.find(".closed").size()>0,m=d.scrollTop(),r=e(b).height()-(i.outerHeight()+h+f+20);if(i.outerHeight()>k.height())return q(),c;a?0===g?m>=j&&r>=m?(i.stop(!1,!0).css("position","fixed").css("top",f),g=1):m>r?i.stop(!1,!0).css("position","fixed").css("top",f-(m-r)):q():j>m?q():m>r&&(i.stop(!1,!0).css("position","fixed").css("top",f-(m-r)),g=0,1===n&&(l.stop(!1,!0),n=0)):0===o&&(p=i.find(".ui-icon-triangle-1-s:not(.pcontent)"))?(o++,p.last().parent().click().delay(250).queue(function(){o--,Q.sidebarMove()})):q()}}function v(){i=e("#navigation"),j=i.offset().top,k=e("#widget-holder"),d.scroll(function(){Q.sidebarMove()})}function y(a){f=a}var i,j,k,p,d=e(a),f=0,g=0,h=e("#footer").outerHeight(),l=e("html,body"),n=0,o=0,w=function(){m>=6||d.scroll(function(){var a=e("#results");if(a.offset()&&6>m){var b=a.height()+a.offset().top,c=b-(d.height()+d.scrollTop());400>c&&a.children(".load-results").trigger("click")}})};return{sidebarInit:v,search:w,set_system_message:y,sidebarMove:u,resetSidebar:q,goToAnchor:r,scrollUp:s}}();Array.indexOf||(Array.prototype.indexOf=function(a){for(var b=0;this.length>b;b++)if(this[b]===a)return b;return-1});var U={init:function(a){U.url=a.ref},submit:function(a){var b=a.closest("#comment-new"),c=b.find(".comment-content").val();if(""===c||"write a comment..."===c)return alert("Please provide your name & comment"),!1;e.ajax({type:"POST",url:"/rest/feed/comment",data:{content:c,url:U.url},success:function(a){u("Comment Submitted!"),b.find("#comment-box").prepend(a),b.find(".comment-content").val("write a comment..."),R(url)},error:function(a,b,c){alert(a+" "+b+" "+c)}});var d=e('<div class="comment-box"><a href="/me">'+name+"</a> "+c+'<br /><span id="fade">just now</span></div>'),f=e("#comments");return f.prepend(d),!1},cmDelete:function(a){var b=a.attr("id"),c=a.attr("rel");e.ajax({type:"POST",url:c,data:{method:"delete",id:b},success:function(){R(c)},error:function(a,b,c){alert(a+" "+b+" "+c)}}),a.parent().remove()}},V={init:function(a){V.url=a.ref},submit:function(a){var b=a.attr("rel"),c=a.attr("url"),d=a.closest("#issues-new"),f=d.find("#name"),g=d.find("#desc-content"),h=d.find("#email");if(S(h,f))return e.ajax({type:"POST",url:b,data:{title:d.find("#issue-title option:selected").val(),content:d.find("#issue-content").val()+(g.length>0?"<br />What were you doing?: <br />&nbsp;&nbsp;"+g.val():""),name:f.val(),email:h.val(),url:c||V.url},success:function(a){if(0===a)alert("The email address has already been registered! Please sign in.");else{var b=e("#content");b.children().not("#spacer").remove(),b.prepend(a)}},error:function(a,b,c){alert(a+" "+b+" "+c)}}),!1},isDelete:function(b){var c=b.attr("rel"),d=Array();e(".issue-deletebox").filter(":checked").each(function(){d.push(e(this).attr("name"))});var f=confirm("Do you really want to delete these issues: #"+d.join(" #"));f&&e.ajax({type:"POST",url:c,data:{method:"delete",issues:d.join("_")},success:function(){a.location.reload(1)},error:function(a,b,c){alert(a+" "+b+" "+c)}})},update:function(b,c){var d=b.attr("rel");return b.closest("#threads-new"),e.ajax({type:"POST",url:d,data:{content:e("textarea").val(),issue:c,state:e("#issue_status option:selected").val(),severity:e("#issue_severity option:selected").val(),assigned_to:e("#issue_assigned_to option:selected").val()},success:function(){a.location.reload()},error:function(){}}),!1}},W={update:function(a,b){a||(a="0");var c=e("li#static-widget-"+a),d=c.find("input#widget_title").val(),f=c.find("input#widget-order").val(),g=c.find("textarea#widget_content").val();e.ajax({type:"POST",url:"/rest/widget/static/"+a,dataType:"json",data:{widget_title:d,path:b,widget_content:g,widget_order:f},success:function(b){W.reload(a,0,b.widget_id)},error:function(a,b,c){alert(a+" "+b+" "+c)}})},edit:function(a){var c=a.split("-").pop(),d=e("#"+a+"-content"),f=d.parent(),g=f.find("a#edit-button");g.hasClass("ui-state-highlight")?W.reload(c):(g.addClass("ui-state-highlight"),d.load("/rest/widget/static/"+c+"?edit=1"))},reload:function(a,b,c){var d=e("#static-widget-"+a+"-content"),f=d.parent(),g=f.find("h3 span.widget-title input"),h="/rest/widget/static/"+(c||a);g.size()>0&&g.parent().html(g.val()),f.find("a.button").removeClass("ui-state-highlight"),e("#nav-static-widget-"+a).text(g.val()),b&&(h=h+"?rev="+b),d.load(h)},delete_widget:function(a){confirm("are you sure you want to delete this widget?")&&e.ajax({type:"POST",url:"/rest/widget/static/"+a+"?delete=1",success:function(){e("#nav-static-widget-"+a).click().hide()},error:function(a,b,c){alert(a+" "+b+" "+c)}})},history:function(a){var b=e("#"+a),c=b.find("div#"+a+"-history");if(c.size()>0)c.toggle(),b.find("a#history-button").toggleClass("ui-state-highlight");else{var d=a.split("-").pop(),c=e('<div id="'+a+'-history"></div>');
c.load("/rest/widget/static/"+d+"?history=1"),b.find("div.content").append(c),b.find("a#history-button").addClass("ui-state-highlight")}}},Z={google:{name:"Google",url:"https://www.google.com/accounts/o8/id"},facebook:{name:"Facebook",url:"http://facebook.anyopenid.com/"}},$=e.extend({},Z),_={signin:function(a){var c=$[a];if(c){var e="/auth/popup?id="+a+"&url="+c.url+"&redirect="+d;this.popupWin(e)}},popupWin:function(b){var c=400,d=600,e=screen.width/2-d/2,f=screen.height/2-c/2,g=a.open(b,"popup","status=no,resizable=yes,height="+c+",width="+d+",left="+e+",top="+f+",toolbar=no,menubar=no,scrollbars=no,location=no,directories=no");g.focus()}},cb=function(){function g(b,c,d,e){function f(){h(c,!0,function(){a[b]=!0,e()})}d?h(d,!1,f()):f()}function h(a,e,f){function j(){i=!0,d=!1,f&&f()}var g=b.documentElement,h=b.createElement(e?"script":"link"),i=!1;if(d=!0,e?h.src=a:(h.href=a,h.rel="stylesheet",h.type="text/css"),e)h.onload=h.onreadystatechange=function(){i||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(j(),h.onload=h.onreadystatechange=null,g&&h.parentNode&&g.removeChild(h))};else{h.onload=function(){j()},h.addEventListener&&h.addEventListener("load",function(){j()},!1),h.onreadystatechange=function(){var a=h.readyState;("loaded"===a||"complete"===a)&&(h.onreadystatechange=null,j())};var k=b.styleSheets.length,l=setInterval(function(){b.styleSheets.length>k&&(j(),clearInterval(l))},10)}return g.insertBefore(h,g.firstChild),c}function i(a,b){var c=e[a],d=f[a];j(a,c,d,b)}function j(b,c,e,f){if(a[b]){if(d)return setTimeout(i(b,c,e,f),1);f()}else g(b,c,e,f)}var a=Array(),d=!1,e={highlight:"/js/jquery/plugins/jquery.highlight-1.1.js",dataTables:"/js/jquery/plugins/dataTables/media/js/jquery.dataTables.min.js",colorbox:"/js/jquery/plugins/colorbox/colorbox/jquery.colorbox-min.js",jGFeed:"/js/jquery/plugins/jGFeed/jquery.jgfeed-min.js",generateFile:"/js/jquery/plugins/generateFile.js",pfam:"/js/pfam/domain_graphics.min.js",markitup:"/js/jquery/plugins/markitup/jquery.markitup.js","markitup-wiki":"/js/jquery/plugins/markitup/sets/wiki/set.js",cytoscape_web:"/js/jquery/plugins/cytoscapeweb/js/min/cytoscapeweb_all.min.js",tabletools:"/js/jquery/plugins/tabletools/media/js/TableTools.all.min.js"},f={dataTables:"/js/jquery/plugins/dataTables/media/css/demo_table.css",colorbox:"/js/jquery/plugins/colorbox/colorbox/colorbox.css",markitup:"/js/jquery/plugins/markitup/skins/markitup/style.css","markitup-wiki":"/js/jquery/plugins/markitup/sets/wiki/style.css",tabletools:"/js/jquery/plugins/tabletools/media/css/TableTools.css"};return{getPlugin:i,loadFile:h}}();return{init:n,ajaxGet:x,hideTextOnFocus:z,goToAnchor:Q.goToAnchor,setLoading:w,resetLayout:P.resetLayout,openAllWidgets:P.openAllWidgets,displayNotification:u,deleteLayout:P.deleteLayout,columns:P.columns,setLayout:P.setLayout,resetPageLayout:P.resetPageLayout,search:B,search_change:C,search_species_change:D,openid:_,validate_fields:S,StaticWidgets:W,recordOutboundLink:K,comment:U,issue:V,getMarkItUp:bb,checkSearch:E,scrollToTop:I,historyOn:X,allResults:J,loadRSS:Y,newLayout:P.newLayout,setupCytoscape:ab,getPlugin:cb.getPlugin,reloadWidget:N,resize:P.resize,loadFile:cb.loadFile}}();e(b).ready(function(){e.ajaxSetup({timeout:12e4}),a.WB||(f.init(),a.WB=f,a.$jq=e)})}(this,document),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Object.keys||(Object.keys=function(a){if(a!==Object(a))throw new TypeError("Object.keys called on non-object");var c,b=[];for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b});